 《斗兽棋》-- 棋类回合制游戏如何开发 .md

[TOC]

## 游戏简介

​    棋类游戏是一种斗智的艺术，是锻炼智力的一种娱乐活动．《斗兽棋》是一款回合制休闲娱乐棋类游戏 , `大象吃狮子,老鼠克大象 ,中间虎豹猫狗`, 随机翻牌有更多的不可以预料性，相比传统的象棋围棋有更多的娱乐特性．


![1537152230436](/[斗兽棋] - 时下火爆的微信小游戏如何快速开发.assets/1537152230436.png)
体验入口地址:
1. 官网链接(http://www.matchvs.com/service?page=8c761450daca58f0)

源代码下载地址:
1. github下载地址:https://github.com/matchvs/AnimalChecker

##　关键词剖析

>`棋类游戏`
　　因<斗兽棋>的玩法是双方各拥八种棋子 , 棋子间相互吞食 , 玩家不同的吞食的策略决定游戏的结果 , 所以可以将整个游戏抽象成一个资源消耗的过程 .

>`回合制`
　　如果把资源消耗称为一个过程 , 那么过程中的玩家走的每一步棋就可以成为一个回合 , 随着游戏的进行 , 回合数不断增加 .
　　回合开始时,程序中可按回合数的奇偶决定哪一方该行动,回合结束计算资源消耗情况,紧接着进行下一个回合,直到游戏结束 .

## 开发过程

### 选择开发工具
1. Cocos Creator     -- 微信小游戏/H5游戏前端表现解决方案
2. Matchvs               -- 微信小游戏/H5游戏联网后端解决方案
工具的使用方法可以参考 (http://www.matchvs.com/service?page=CocosCreatorStart)

### 游戏主要功能实现

#### 1.用户连接

如果要把用户连接在一起, 我们需要借助互联网,登录服务器 , 

先用CC 的可视化界面编辑器,拖动控件, 创建一个供玩家交互的游戏登录场景(`这一步如果没有CC编辑器,游戏场景界面的编辑,管理和调整将会是一件相当复杂的事情`) 

![Snipaste_2018-07-11_16-30-52](/[斗兽棋] - 时下火爆的微信小游戏如何快速开发.assets/1537153713762.png)

![1537152524452](/[斗兽棋] - 时下火爆的微信小游戏如何快速开发.assets/1537152524452.png)

再使用matchvs联网服务中的匹配接口(`joinRandomRoom`) , 在两个玩家之间建立一条连接通道 . 使用CC创建大厅场景, 使得玩家可以开始对战

```javascript
uiMatching1v1.js
----
matching.joinRandomRoom();
```

#### 2. 实现游戏交互

按照之前整理的设计思路, 借助CC绘制一个棋盘,再在程序中申明一个16格的数组,以标记玩家手中的棋子在棋盘中的位置, 同时借助Matchvs的房间内玩家通信接口`sendEvent`(http://www.matchvs.com/service?page=JavaScriptBase#游戏数据传输 ),完成每个游戏回合中对这个数组的计算. 最终实现游戏中你来我往的对弈过程 .

步骤可分解为:

1. 定义一个16格的数组和一个回合数计数器
2. 判断当前回合数是否为0来发牌,即回合开始前,可以选一个userID较大的玩家进行随机发牌,给数组赋值,并同步给另一个玩家 , 回合数+1
3. 开始回合 , 监听玩家动作
4. 依据每回合玩家的动作 , 在回合结束时 , 计算数组中每格的值,同步后结束此回合 , 同时回合数+1(`如果这一步没有Matchvs的网络数据同步功能,将会面临服务器租赁,数据安全,服务器操作系统和基础软件安装及运维,服务端软件开发等一系列成本`)
5. 循环3,4过程,直到满足游戏结束条件

![1537152230436](/[斗兽棋] - 时下火爆的微信小游戏如何快速开发.assets/1537152230436.png)



## 总结

通过阅读上述的内容, 相信大家对如何开发联网回合制棋类游戏有了一定的理解 , 虽然实际游戏中有很多细节还需要开发者完善,但借助`Cococs Creator`和`Matchvs游戏云`的这两套解决方案，游戏的开发会变得更简单！

